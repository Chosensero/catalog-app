(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5528:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var i=r(5155),n=r(2115),o=r(8088),a=r(2269),l=r(9915),s=r(9670),d=r(3951),c=r(4256),x=r(8274),h=r(3339),u=r(71);let f=e=>{let{products:t,onProductClick:r}=e;return(0,i.jsx)(d.Ay,{container:!0,spacing:4,children:t.map(e=>(0,i.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsxs)(c.A,{sx:{border:"none",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",height:450,display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer","&:hover":{transform:"scale(1.02)",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"}},onClick:()=>r(e),children:[(0,i.jsx)(a.A,{sx:{height:300,backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:(0,i.jsx)(x.A,{component:"img",image:e.image,alt:e.title,sx:{maxHeight:"100%",maxWidth:"100%",objectFit:"contain"}})}),(0,i.jsxs)(h.A,{sx:{p:2,flexGrow:1},children:[(0,i.jsxs)(s.A,{variant:"h5",sx:{fontWeight:"bold",color:"#212121",mb:.5},children:["$",e.price]}),(0,i.jsx)(s.A,{variant:"body2",sx:{fontSize:"0.9rem",color:"#212121",mb:.5},children:e.title}),(0,i.jsx)(s.A,{variant:"body2",sx:{fontSize:"0.8rem",color:"#757575"},children:e.category}),(0,i.jsx)(u.A,{label:"New",size:"small",sx:{mt:1,backgroundColor:"#1976d2",color:"#fff"}})]})]})},e.id))})};var p=r(5857),g=r(2073),m=r(680),j=r(4092);let b=e=>{let{categories:t,selectedCategory:r,searchQuery:n,onCategoryChange:o,onSearchChange:l,capitalize:s}=e;return(0,i.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,i.jsx)(a.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:t.map(e=>(0,i.jsx)(p.A,{variant:r===e?"contained":"outlined",onClick:()=>o(e),sx:{borderRadius:"20px",textTransform:"none",fontWeight:"normal",backgroundColor:r===e?"#212121":"transparent",color:r===e?"#fff":"#212121",borderColor:"#212121","&:hover":{backgroundColor:r===e?"#212121":"#f5f5f5",borderColor:"#212121"},height:36,px:2},children:s("all"===e?"Все":e)},e))}),(0,i.jsx)(g.A,{placeholder:"Search...",value:n,onChange:e=>l(e.target.value),InputProps:{startAdornment:(0,i.jsx)(m.A,{position:"start",children:(0,i.jsx)(j.A,{sx:{color:"#212121",fontSize:20}})})},size:"small",sx:{width:150,backgroundColor:"#fff",borderRadius:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)","& .MuiOutlinedInput-root":{height:36,"& fieldset":{borderColor:"#212121"},"&:hover fieldset":{borderColor:"#212121"},"&.Mui-focused fieldset":{borderColor:"#212121"},"& .MuiInputBase-input":{color:"#212121",fontSize:"0.9rem",padding:"8px 12px"}}}})]})};var y=r(6766);let C=(0,n.lazy)(()=>r.e(303).then(r.bind(r,2684))),A=(0,n.lazy)(()=>r.e(612).then(r.bind(r,9612))),v=(0,n.lazy)(()=>r.e(279).then(r.bind(r,7279))),w=(0,n.lazy)(()=>r.e(381).then(r.bind(r,381))),k=(0,n.lazy)(()=>r.e(863).then(r.bind(r,5863))),S=e=>{let{open:t,product:r,quantity:o,onClose:l,onQuantityChange:d,onAddToCart:c}=e;return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)(s.A,{children:"Загрузка..."}),children:(0,i.jsxs)(C,{open:t,onClose:l,children:[(0,i.jsx)(A,{sx:{color:"#212121"},children:null==r?void 0:r.title}),(0,i.jsx)(v,{children:(0,i.jsxs)(a.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,i.jsx)(a.A,{sx:{width:100,height:100,backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:r&&(0,i.jsx)(y.default,{src:r.image,alt:r.title,width:100,height:100,style:{objectFit:"contain"},unoptimized:!0})}),(0,i.jsxs)(a.A,{children:[(0,i.jsxs)(s.A,{variant:"h6",sx:{color:"#212121"},children:["$",null==r?void 0:r.price]}),(0,i.jsx)(s.A,{variant:"body2",sx:{color:"#757575"},children:null==r?void 0:r.category}),(0,i.jsx)(k,{type:"number",label:"Количество",size:"small",inputProps:{min:1},value:o,onChange:e=>d(parseInt(e.target.value)),sx:{mt:2,width:100}})]})]})}),(0,i.jsxs)(w,{children:[(0,i.jsx)(p.A,{onClick:l,sx:{color:"#757575"},children:"Отмена"}),(0,i.jsx)(p.A,{variant:"contained",onClick:c,sx:{backgroundColor:"#1976d2"},children:"Заказать"})]})]})})};function z(){let[e,t]=(0,n.useState)([]),[r,d]=(0,n.useState)([]),[c,x]=(0,n.useState)(!0),[h,u]=(0,n.useState)(null),[p,g]=(0,n.useState)(""),[m,j]=(0,n.useState)(""),[y,C]=(0,n.useState)("all"),{addToCart:A}=(0,o._)(),[v,w]=(0,n.useState)({}),[k,z]=(0,n.useState)(!1),[q,I]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let[e,r]=await Promise.all([fetch("https://fakestoreapi.com/products"),fetch("https://fakestoreapi.com/products/categories")]);if(!e.ok||!r.ok)throw Error("Ошибка загрузки данных");let i=await e.json(),n=await r.json();t(i),d(["all",...n])}catch(e){u(e.message)}finally{x(!1)}})()},[]),(0,n.useEffect)(()=>{let e=setTimeout(()=>j(p),500);return()=>clearTimeout(e)},[p]);let P=e.filter(e=>e.title.toLowerCase().includes(m.toLowerCase())&&("all"===y||e.category===y)),_=(e,t)=>{w(r=>({...r,[e]:Math.max(1,t)}))},E=()=>{z(!1),I(null)};return c?(0,i.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,i.jsx)(l.A,{size:60,thickness:4,sx:{color:"#1976d2"}})}):h?(0,i.jsx)(a.A,{sx:{textAlign:"center",mt:4},children:(0,i.jsxs)(s.A,{variant:"h6",color:"error",children:["Ошибка: ",h]})}):(0,i.jsxs)(a.A,{children:[(0,i.jsxs)(s.A,{variant:"h4",sx:{fontWeight:"bold",mb:3,color:"#212121"},children:["Все предложения: ",P.length]}),(0,i.jsx)(b,{categories:r,selectedCategory:y,searchQuery:p,onCategoryChange:C,onSearchChange:g,capitalize:e=>e?e.charAt(0).toUpperCase()+e.slice(1):e}),P.length>0?(0,i.jsx)(f,{products:P,onProductClick:e=>{I(e),z(!0)}}):(0,i.jsx)(s.A,{variant:"body1",sx:{textAlign:"center",color:"#757575"},children:"Ничего не найдено"}),(0,i.jsx)(S,{open:k,product:q,quantity:q&&v[q.id]||1,onClose:E,onQuantityChange:e=>q&&_(q.id,e),onAddToCart:()=>{q&&(A({id:q.id,title:q.title,price:q.price,image:q.image},v[q.id]||1),E())}})]})}},8088:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>a,_:()=>l});var i=r(5155),n=r(2115);let o=(0,n.createContext)(void 0),a=e=>{let{children:t}=e,[r,a]=(0,n.useState)([]);return(0,i.jsx)(o.Provider,{value:{cart:r,addToCart:(e,t)=>{a(r=>r.find(t=>t.id===e.id)?r.map(r=>r.id===e.id?{...r,quantity:r.quantity+t}:r):[...r,{...e,quantity:t}])},removeFromCart:e=>{a(t=>t.filter(t=>t.id!==e))},increaseQuantity:e=>{a(t=>t.map(t=>t.id===e?{...t,quantity:t.quantity+1}:t))},decreaseQuantity:e=>{a(t=>t.map(t=>t.id===e&&t.quantity>1?{...t,quantity:t.quantity-1}:t).filter(e=>e.quantity>0))},clearCart:()=>{a([])}},children:t})},l=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useCart must be used within a CartProvider");return e}},9003:(e,t,r)=>{Promise.resolve().then(r.bind(r,5528))}},e=>{var t=t=>e(e.s=t);e.O(0,[780,718,857,378,441,684,358],()=>t(9003)),_N_E=e.O()}]);