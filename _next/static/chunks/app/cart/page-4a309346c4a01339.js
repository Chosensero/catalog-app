(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{553:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var r=i(5155),n=i(8088),s=i(2269),a=i(9670),d=i(5439),c=i(3032),l=i(5857),o=i(4995),x=i(4146),u=i(3537),h=i(6537),j=i(6444),y=i(5843),A=i(5136),m=i(1023);let v=e=>{let{item:t,onIncrease:i,onDecrease:n,onRemove:d}=e;return(0,r.jsxs)(o.Ay,{secondaryAction:(0,r.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(x.A,{onClick:()=>n(t.id),children:(0,r.jsx)(A.A,{})}),(0,r.jsx)(a.A,{children:t.quantity}),(0,r.jsx)(x.A,{onClick:()=>i(t.id),children:(0,r.jsx)(y.A,{})}),(0,r.jsx)(x.A,{onClick:()=>d(t.id),color:"error",children:(0,r.jsx)(m.A,{})})]}),children:[(0,r.jsx)(u.A,{children:(0,r.jsx)(h.A,{variant:"square",src:t.image,sx:{width:80,height:80,mr:2,objectFit:"contain"}})}),(0,r.jsx)(j.A,{primary:t.title,secondary:(0,r.jsxs)(a.A,{variant:"body2",color:"text.secondary",children:["$",t.price," x ",t.quantity," = $",(t.price*t.quantity).toFixed(2)]})})]})};function p(){let{cart:e,removeFromCart:t,increaseQuantity:i,decreaseQuantity:o,clearCart:x}=(0,n._)(),u=e.reduce((e,t)=>e+t.price*t.quantity,0).toFixed(2);return(0,r.jsxs)(s.A,{children:[(0,r.jsx)(a.A,{variant:"h4",sx:{fontWeight:"bold",mb:4},children:"Корзина"}),e.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{children:e.map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)(v,{item:e,onIncrease:i,onDecrease:o,onRemove:t}),(0,r.jsx)(c.A,{})]},e.id))}),(0,r.jsxs)(s.A,{sx:{mt:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)(a.A,{variant:"h6",sx:{fontWeight:"bold"},children:["Итого: $",u]}),(0,r.jsx)(l.A,{variant:"contained",color:"error",onClick:x,children:"Очистить корзину"})]})]}):(0,r.jsx)(a.A,{variant:"body1",sx:{textAlign:"center",color:"text.secondary"},children:"Корзина пуста"})]})}},8088:(e,t,i)=>{"use strict";i.d(t,{CartProvider:()=>a,_:()=>d});var r=i(5155),n=i(2115);let s=(0,n.createContext)(void 0),a=e=>{let{children:t}=e,[i,a]=(0,n.useState)([]);return(0,r.jsx)(s.Provider,{value:{cart:i,addToCart:(e,t)=>{a(i=>i.find(t=>t.id===e.id)?i.map(i=>i.id===e.id?{...i,quantity:i.quantity+t}:i):[...i,{...e,quantity:t}])},removeFromCart:e=>{a(t=>t.filter(t=>t.id!==e))},increaseQuantity:e=>{a(t=>t.map(t=>t.id===e?{...t,quantity:t.quantity+1}:t))},decreaseQuantity:e=>{a(t=>t.map(t=>t.id===e&&t.quantity>1?{...t,quantity:t.quantity-1}:t).filter(e=>e.quantity>0))},clearCart:()=>{a([])}},children:t})},d=()=>{let e=(0,n.useContext)(s);if(!e)throw Error("useCart must be used within a CartProvider");return e}},9951:(e,t,i)=>{Promise.resolve().then(i.bind(i,553))}},e=>{var t=t=>e(e.s=t);e.O(0,[780,857,473,441,684,358],()=>t(9951)),_N_E=e.O()}]);